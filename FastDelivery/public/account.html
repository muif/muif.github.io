<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>حسابي | FastDelivery</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@500;700;900&display=swap');

        * {
            box-sizing: border-box;
            font-family: 'Tajawal', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            margin: 0;
            padding: 0;
            background: #f8fafc;
            padding-bottom: 90px;
        }

        /* الهيدر الشخصي */
        .profile-header {
            background: linear-gradient(135deg, #1e293b, #0f172a);
            color: white;
            padding: 40px 20px 60px 20px;
            text-align: center;
            border-bottom-left-radius: 30px;
            border-bottom-right-radius: 30px;
            position: relative;
        }

        .avatar-container {
            width: 90px;
            height: 90px;
            margin: 0 auto 15px auto;
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            border-radius: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 40px;
            border: 4px solid rgba(255,255,255,0.2);
            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.4);
            transform: rotate(-5deg);
        }

        .profile-header h2 {
            margin: 0;
            font-size: 24px;
            font-weight: 900;
        }

        .profile-header p {
            margin: 5px 0 0 0;
            color: #94a3b8;
            font-size: 14px;
        }

        /* الإحصائيات السريعة */
        .quick-stats {
            display: flex;
            justify-content: space-around;
            background: white;
            margin: -30px 20px 20px 20px;
            padding: 15px;
            border-radius: 20px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.05);
            position: relative;
            z-index: 2;
        }

        .stat-item {
            text-align: center;
            flex: 1;
            border-left: 1px solid #f1f5f9;
        }

            .stat-item:last-child {
                border-left: none;
            }

            .stat-item h3 {
                margin: 0;
                color: #1e293b;
                font-size: 18px;
                font-weight: 900;
            }

            .stat-item p {
                margin: 5px 0 0 0;
                color: #64748b;
                font-size: 12px;
                font-weight: bold;
            }

        /* القوائم والأقسام */
        .menu-section {
            margin: 0 20px 20px 20px;
            background: white;
            border-radius: 20px;
            padding: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.03);
        }

        .menu-title {
            margin: 10px 15px;
            font-size: 14px;
            color: #94a3b8;
            font-weight: bold;
        }

        .menu-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border-radius: 15px;
            text-decoration: none;
            color: #1e293b;
            transition: 0.2s;
            cursor: pointer;
        }

            .menu-item:active {
                background: #f1f5f9;
                transform: scale(0.98);
            }

        .menu-icon {
            width: 40px;
            height: 40px;
            border-radius: 12px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 18px;
            margin-left: 15px;
        }

        .menu-text {
            flex: 1;
            font-size: 15px;
            font-weight: bold;
        }

        .menu-arrow {
            color: #cbd5e1;
            font-size: 14px;
        }

        /* ألوان الأيقونات */
        .bg-blue {
            background: #eff6ff;
            color: #3b82f6;
        }

        .bg-green {
            background: #f0fdf4;
            color: #22c55e;
        }

        .bg-purple {
            background: #faf5ff;
            color: #a855f7;
        }

        .bg-orange {
            background: #fff7ed;
            color: #f97316;
        }

        .bg-red {
            background: #fef2f2;
            color: #ef4444;
        }

        /* ========================================= */
        /* تنسيقات الشريط السفلي (تصميم عصري متقدم) */
        /* ========================================= */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: #ffffff;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 5px 10px;
            box-shadow: 0 -5px 25px rgba(0,0,0,0.08);
            z-index: 1500;
            border-top-left-radius: 30px;
            border-top-right-radius: 30px;
            height: 70px;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #94a3b8;
            text-decoration: none;
            font-size: 11px;
            font-weight: bold;
            gap: 4px;
            transition: 0.3s;
            flex: 1;
            -webkit-tap-highlight-color: transparent;
        }

            .nav-item i {
                font-size: 22px;
                transition: 0.3s;
            }

            .nav-item.active {
                color: #e11d48;
            }

                .nav-item.active i {
                    transform: translateY(-4px);
                    filter: drop-shadow(0 4px 6px rgba(225, 29, 72, 0.3));
                }

        .center-btn-wrapper {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            flex: 1.2;
            height: 100%;
        }

        .center-fab-btn {
            position: absolute;
            top: -45px;
            width: 75px;
            height: 75px;
            border-radius: 50%;
            background: linear-gradient(135deg, #e11d48, #be123c);
            color: white;
            border: 8px solid #f8fafc;
            box-shadow: 0 10px 20px rgba(225, 29, 72, 0.4);
            font-size: 28px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            outline: none;
            z-index: 10;
            animation: pulse-ring 2.5s infinite;
        }

            .center-fab-btn:active {
                transform: scale(0.85);
            }

        .center-fab-text {
            position: absolute;
            bottom: -5px;
            font-size: 11px;
            color: #e11d48;
            font-weight: 900;
        }

        @keyframes pulse-ring {
            0% {
                box-shadow: 0 0 0 0 rgba(225, 29, 72, 0.5);
            }

            70% {
                box-shadow: 0 0 0 15px rgba(225, 29, 72, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(225, 29, 72, 0);
            }
        }
    </style>
</head>
<body style="display: none;">
    <div class="profile-header">
        <div class="avatar-container">
            <i class="fas fa-user-astronaut"></i>
        </div>
        <h2 id="acc-name">جاري التحميل...</h2>
        <p id="acc-phone">07X XXXX XXXX</p>
    </div>

    <div class="quick-stats">
        <div class="stat-item">
            <h3 id="acc-points">0</h3>
            <p>نقاط الولاء</p>
        </div>
        <div class="stat-item">
            <h3 id="acc-orders">0</h3>
            <p>طلبات مكتملة</p>
        </div>
        <div class="stat-item">
            <h3 style="color: #10b981;"><i class="fas fa-star"></i></h3>
            <p id="acc-tier">مبتدئ</p>
        </div>
    </div>
    <div id="account-update-banner" style="display: none; background: linear-gradient(135deg, #f59e0b, #d97706); margin: 0 20px 20px 20px; padding: 15px; border-radius: 15px; color: white; align-items: center; justify-content: space-between; box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);">
        <div style="flex: 1;">
            <h4 style="margin: 0 0 5px 0; font-size: 15px;"><i class="fas fa-arrow-circle-up"></i> تحديث جديد متوفر!</h4>
            <p id="acc-upd-title" style="margin: 0; font-size: 12px; opacity: 0.9; line-height: 1.4;">احصل على أحدث الميزات والإصلاحات.</p>
        </div>
        <a id="acc-upd-link" href="#" style="background: white; color: #d97706; padding: 8px 15px; border-radius: 8px; font-weight: bold; font-size: 12px; text-decoration: none; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">تحديث</a>
    </div>
    <div class="menu-title">الإعدادات الشخصية</div>
    <div class="menu-section">
        <div class="menu-item" id="btn-edit-profile">
            <div class="menu-icon bg-blue"><i class="fas fa-user-edit"></i></div>
            <div class="menu-text">تعديل البيانات الشخصية</div>
            <i class="fas fa-chevron-left menu-arrow"></i>
        </div>
        <div class="menu-item" id="btn-change-password">
            <div class="menu-icon bg-orange"><i class="fas fa-lock"></i></div>
            <div class="menu-text">تغيير كلمة المرور</div>
            <i class="fas fa-chevron-left menu-arrow"></i>
        </div>
    </div>

    <div class="menu-title">المساعدة والدعم</div>
    <div class="menu-section">
        <div class="menu-item" id="btn-support-whatsapp">
            <div class="menu-icon bg-green"><i class="fab fa-whatsapp"></i></div>
            <div class="menu-text">تواصل معنا (WhatsApp)</div>
            <i class="fas fa-chevron-left menu-arrow"></i>
        </div>
        <div class="menu-item" id="btn-support-email" style="display:none; border-top: 1px solid #f1f5f9; border-radius: 0;">
            <div class="menu-icon bg-blue"><i class="fas fa-envelope"></i></div>
            <div class="menu-text">راسلنا (Email)</div>
            <i class="fas fa-chevron-left menu-arrow"></i>
        </div>
    </div>

    <div class="menu-title">تسجيل الخروج او حذف الحساب</div>
    <div class="menu-section">
        <div class="menu-item" id="btn-logout">
            <div class="menu-icon bg-red"><i class="fas fa-sign-out-alt"></i></div>
            <div class="menu-text" style="color: #ef4444;">تسجيل الخروج</div>
        </div>
        <div class="menu-item" id="btn-delete-account" style="border-top: 1px solid #f1f5f9; border-radius: 0;">
            <div class="menu-icon" style="background: #fef2f2; color: #dc2626;"><i class="fas fa-user-times"></i></div>
            <div class="menu-text" style="color: #dc2626;">حذف الحساب نهائياً</div>
        </div>
    </div>
    <style>
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(4px);
            z-index: 2000;
            display: flex;
            justify-content: center;
            align-items: flex-end; /* تظهر من الأسفل */
            opacity: 0;
            visibility: hidden;
            transition: 0.3s;
        }

            .modal-overlay.active {
                opacity: 1;
                visibility: visible;
            }

        .modal-content {
            background: white;
            width: 100%;
            max-width: 500px;
            padding: 25px 20px 40px 20px;
            border-top-left-radius: 30px;
            border-top-right-radius: 30px;
            transform: translateY(100%);
            transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .modal-overlay.active .modal-content {
            transform: translateY(0);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

            .modal-header h3 {
                margin: 0;
                font-size: 20px;
                color: #1e293b;
                font-weight: 900;
            }

        .close-modal {
            background: #f1f5f9;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #64748b;
            cursor: pointer;
            font-size: 16px;
        }

        .form-group {
            margin-bottom: 15px;
        }

            .form-group label {
                display: block;
                margin-bottom: 8px;
                font-size: 14px;
                font-weight: bold;
                color: #475569;
            }

            .form-group input {
                width: 100%;
                padding: 15px;
                border: 2px solid #e2e8f0;
                border-radius: 12px;
                font-size: 15px;
                font-family: inherit;
                background: #f8fafc;
                outline: none;
                transition: 0.3s;
            }

                .form-group input:focus {
                    border-color: #3b82f6;
                    background: white;
                }

        .save-btn {
            width: 100%;
            background: #3b82f6;
            color: white;
            padding: 16px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 10px;
            transition: 0.2s;
            box-shadow: 0 5px 15px rgba(59, 130, 246, 0.3);
        }

            .save-btn:active {
                transform: scale(0.98);
            }

            .save-btn:disabled {
                background: #94a3b8;
                box-shadow: none;
                cursor: not-allowed;
            }
    </style>

    <div id="modal-edit-profile" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-user-edit" style="color:#3b82f6;"></i> تعديل البيانات</h3>
                <i class="fas fa-times close-modal" data-target="modal-edit-profile"></i>
            </div>
            <div class="form-group">
                <label>الاسم الكامل</label>
                <input type="text" id="edit-name-input" placeholder="اكتب اسمك الجديد">
            </div>
            <div class="form-group">
                <label>رقم الهاتف</label>
                <input type="tel" id="edit-phone-input" placeholder="07X XXXX XXXX" dir="ltr" maxlength="11" oninput="this.value = this.value.replace(/[^0-9]/g, '');">
            </div>
            <button class="save-btn" id="save-profile-btn">حفظ التعديلات</button>
        </div>
    </div>

    <div id="modal-change-password" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-lock" style="color:#f97316;"></i> تغيير كلمة المرور</h3>
                <i class="fas fa-times close-modal" data-target="modal-change-password"></i>
            </div>
            <div class="form-group">
                <label>كلمة المرور الحالية (للتأكيد)</label>
                <input type="password" id="current-pwd-input" placeholder="أدخل كلمة المرور القديمة">
            </div>
            <div class="form-group">
                <label>كلمة المرور الجديدة</label>
                <input type="password" id="new-pwd-input" placeholder="أدخل كلمة المرور الجديدة">
            </div>
            <button class="save-btn" id="save-pwd-btn" style="background: #f97316; box-shadow: 0 5px 15px rgba(249, 115, 22, 0.3);">تحديث كلمة المرور</button>
            <p id="pwd-error-msg" style="color:#ef4444; font-size:13px; font-weight:bold; margin-top:15px; text-align:center; display:none;"></p>
        </div>
    </div>
    <div id="modal-delete-account" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-exclamation-triangle" style="color:#dc2626;"></i> تحذير هام</h3>
                <i class="fas fa-times close-modal" data-target="modal-delete-account"></i>
            </div>
            <p style="color: #475569; font-size: 14px; margin-bottom: 20px; line-height: 1.6; background: #fef2f2; padding: 15px; border-radius: 10px; border: 1px dashed #f87171;">
                سيتم مسح حسابك، وسجل طلباتك، ونقاط الولاء الخاصة بك بشكل نهائي ولن تتمكن من التراجع عن هذا الإجراء.
                <br><br><strong>يرجى إدخال كلمة المرور لتأكيد الحذف:</strong>
            </p>
            <div class="form-group">
                <input type="password" id="delete-pwd-input" placeholder="كلمة المرور الخاصة بك">
            </div>
            <button class="save-btn" id="confirm-delete-btn" style="background: #dc2626; box-shadow: 0 5px 15px rgba(220, 38, 38, 0.3);">حذف حسابي للأبد</button>
            <p id="delete-error-msg" style="color:#ef4444; font-size:13px; font-weight:bold; margin-top:15px; text-align:center; display:none;"></p>
        </div>
    </div>
    <nav class="bottom-nav">
        <a href="index.html" class="nav-item"> <i class="fas fa-home"></i> <span>الرئيسية</span> </a>
        <a href="status.html" class="nav-item"> <i class="fas fa-clipboard-list"></i> <span>طلباتي</span> </a>

        <div class="center-btn-wrapper">
            <button id="open-direct-order-btn" class="center-fab-btn">
                <i class="fas fa-bolt"></i>
            </button>
            <span class="center-fab-text">طلب حر</span>
        </div>

        <a href="rewards.html" class="nav-item"> <i class="fas fa-gift"></i> <span>مكافآتي</span> </a>
        <a href="account.html" class="nav-item active"> <i class="fas fa-user"></i> <span>حسابي</span> </a>
    </nav>

    <script type="module" src="js/account.js"></script>
</body>
</html>